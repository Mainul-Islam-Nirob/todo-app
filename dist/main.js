(()=>{const t=(e,t,o,n)=>({title:e,description:t,dueDate:o,priority:n}),o=e=>({name:e,todos:[]}),n=[],d=e=>{const t=o(e);n.push(t),g(),c()};console.log(n);let l=null;const c=()=>{const e=document.getElementById("project-list");e.innerHTML="",n.forEach(((t,o)=>{const d=document.createElement("div");d.classList.add("project");const s=document.createElement("span");s.classList.add("project-name"),s.textContent=t.name,s.addEventListener("click",(()=>{document.querySelectorAll(".project-name").forEach((e=>e.classList.remove("project-active"))),s.classList.add("project-active"),a(o)}));const i=document.createElement("div");i.classList.add("projectBtns");const r=document.createElement("i");r.classList.add("projectBtn","fa-solid","fa-pen-to-square"),r.onclick=()=>(e=>{l=e,document.getElementById("projectName").value=n[e].name,document.getElementById("projectModalTitle").textContent="Update Project",m("projectModal")})(o);const u=document.createElement("i");u.classList.add("projectBtn","fa-regular","fa-trash"),u.onclick=()=>(e=>{confirm("Are you sure you want to delete this project and all its todos?")&&(n.splice(e,1),g(),c(),document.getElementById("todo-list").innerHTML="")})(o);const E=document.createElement("i");E.classList.add("projectBtn","fa-sharp","fa-solid","fa-plus"),E.onclick=()=>{p=o,m("todoModal")},i.appendChild(r),i.appendChild(u),i.appendChild(E),d.appendChild(s),d.appendChild(i),e.appendChild(d)}))};let s=null;const a=e=>{const t=document.getElementById("todo-list");t.innerHTML="",console.log("project index",e),n[e].todos.forEach(((o,d)=>{console.log("todo from loop",o,d);const l=document.createElement("div");l.classList.add("todoItem");const c=document.createElement("div");c.classList.add("t-title"),c.textContent=o.title,l.appendChild(c);const i=document.createElement("div");i.classList.add("t-description"),i.textContent=o.description,l.appendChild(i);const r=document.createElement("div");r.classList.add("t-priority"),r.textContent=`Priority: ${o.priority}`,l.appendChild(r);const p=document.createElement("div");p.classList.add("t-dueDate"),p.textContent=`Due: ${o.dueDate}`,l.appendChild(p);const y=document.createElement("div");y.classList.add("edit-item");const h=document.createElement("span");h.classList.add("edit-btn"),h.textContent="Edit",h.onclick=()=>((e,t)=>{s=t;const o=n[e].todos[t];document.getElementById("title").value=o.title,document.getElementById("details").value=o.description,document.getElementById("date").value=o.dueDate,u=o.priority,E("Low"===u?"low-btn":"high-btn","High"===u?"low-btn":"high-btn"),document.getElementById("todoModalTitle").textContent="Update Task",m("todoModal")})(e,d),y.appendChild(h);const L=document.createElement("span");L.classList.add("edit-btn"),L.textContent="Delete",L.addEventListener("click",(()=>{n[e].todos.splice(d,1),a(e),g()})),y.appendChild(L),l.appendChild(y),t.appendChild(l)}))},i=()=>{document.getElementById("todo-form").reset(),document.getElementById("project-form").reset(),u="",s=null,l=null,document.getElementById("todoModalTitle").textContent="New Task",document.getElementById("projectModalTitle").textContent="New Project"},m=t=>{const o=document.getElementById(t);o.style.display="block",o.querySelector(".closeBtn").addEventListener("click",(()=>{o.style.display="none",i()})),window.addEventListener("click",r(e,t))};function r(e,t){const o=document.getElementById(t);document.getElementById(".modal-content").contains(e.target)||(o.style.display="none",i(),window.removeEventListener("click",(e=>r(e,t))))}let u="";document.getElementById("low-btn").addEventListener("click",(()=>{u="Low",E("low-btn","high-btn")})),document.getElementById("high-btn").addEventListener("click",(()=>{u="High",E("high-btn","low-btn")}));let p=0;function E(e,t){console.log("Selected ID:",e),console.log("Other ID:",t);const o=document.getElementById(e),n=document.getElementById(t);o&&(o.classList.add("selected"),console.log(o),console.log("change selected button style")),n&&(n.classList.remove("selected"),console.log("change other button style"))}document.getElementById("show-todo-modal").addEventListener("click",(()=>m("todoModal"))),document.getElementById("show-project-modal").addEventListener("click",(()=>m("projectModal"))),document.getElementById("todo-form").addEventListener("submit",(e=>{e.preventDefault();const o=document.getElementById("title").value,d=document.getElementById("details").value,l=document.getElementById("date").value;if(!u)return void alert("Please select a priority!");const c=u;if(null!==s){const e=p;n[e].todos[s]=t(o,d,l,c),a(e),s=null}else{const e=t(o,d,l,c);((e,t)=>{console.log("from add to do project",t),n[e].todos.push(t),g(),a(e)})(p,e)}g(),document.getElementById("todoModal").style.display="none",E(),i()})),document.getElementById("project-form").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("projectName").value;null!==l?(n[l].name=t,c(),l=null):d(t),g(),document.getElementById("projectModal").style.display="none",i()}));const g=()=>{localStorage.setItem("todoAppData",JSON.stringify(n))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=localStorage.getItem("todoAppData");if(e)JSON.parse(e).forEach((e=>{const d=o(e.name);e.todos.forEach((e=>{d.todos.push(t(e.title,e.description,e.dueDate,e.priority))})),n.push(d)})),c(),n.length>0&&a(0);else{const e=d("Default List");g(),c(),a(n.indexOf(e))}})()}))})();