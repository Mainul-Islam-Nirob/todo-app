(()=>{const e=(e,t,o,n)=>({title:e,description:t,dueDate:o,priority:n}),t=e=>({name:e,todos:[]}),o=[],n=e=>{const n=t(e);o.push(n),c()},d=(e,t)=>{o[e].todos.push(t),l(e)},c=()=>{const e=document.getElementById("project-list");e.innerHTML="",o.forEach(((t,o)=>{const n=document.createElement("div");n.classList.add("project");const c=document.createElement("span");c.classList.add("project-name"),c.textContent=t.name;const l=document.createElement("div");l.classList.add("projectBtns");const s=document.createElement("i");s.classList.add("projectBtn","fa-solid","fa-pen-to-square"),s.onclick=()=>editProject(o);const a=document.createElement("i");a.classList.add("projectBtn","fa-regular","fa-trash"),a.onclick=()=>deleteProject(o);const i=document.createElement("i");i.classList.add("projectBtn","fa-sharp","fa-solid","fa-plus"),i.onclick=()=>d(o),l.appendChild(s),l.appendChild(a),l.appendChild(i),n.appendChild(c),n.appendChild(l),e.appendChild(n)}))},l=e=>{const t=document.getElementById("todo-list");t.innerHTML="",console.log("project index",e),o[e].todos.forEach(((n,d)=>{console.log("todo from loop",n,d);const c=document.createElement("div");c.classList.add("todoItem");const s=document.createElement("div");s.classList.add("t-title"),s.textContent=n.title,c.appendChild(s);const a=document.createElement("div");a.classList.add("t-description"),a.textContent=n.description,c.appendChild(a);const i=document.createElement("div");i.classList.add("t-priority"),i.textContent=`Priority: ${n.priority}`,c.appendChild(i);const m=document.createElement("div");m.classList.add("t-dueDate"),m.textContent=`Due: ${n.dueDate}`,c.appendChild(m);const p=document.createElement("div");p.classList.add("edit-item");const u=document.createElement("button");u.classList.add("edit-btn"),u.textContent="Edit",u.addEventListener("click",(()=>{console.log(`Editing todo at index ${d}`)})),p.appendChild(u);const E=document.createElement("button");E.classList.add("edit-btn"),E.textContent="Delete",E.addEventListener("click",(()=>{o[e].todos.splice(d,1),l(e),r()})),p.appendChild(E),c.appendChild(p),t.appendChild(c)}))},s=e=>{const t=document.getElementById(e);t.style.display="block",t.querySelector(".closeBtn").addEventListener("click",(()=>{t.style.display="none"}))};let a="";function i(e,t){console.log("Selected ID:",e),console.log("Other ID:",t);const o=document.getElementById(e),n=document.getElementById(t);o&&(o.classList.add("selected"),console.log(o),console.log("change selected button style")),n&&(n.classList.remove("selected"),console.log("change other button style"))}document.getElementById("low-btn").addEventListener("click",(()=>{a="Low",i("low-btn","high-btn")})),document.getElementById("high-btn").addEventListener("click",(()=>{a="High",i("high-btn","low-btn")})),document.getElementById("show-todo-modal").addEventListener("click",(()=>s("todoModal"))),document.getElementById("show-project-modal").addEventListener("click",(()=>s("projectModal"))),document.getElementById("todo-form").addEventListener("submit",(t=>{t.preventDefault(),console.log("clicked add todo");const o=document.getElementById("title").value,n=document.getElementById("details").value,c=document.getElementById("date").value;if(!a)return void alert("Please select a priority!");const l=a;console.log(o,n,c,l);const s=e(o,n,c,l);console.log("todo details",s),d(0,s),document.getElementById("todoModal").style.display="none",document.getElementById("todo-form").reset(),a="",i()})),document.getElementById("project-form").addEventListener("submit",(e=>{e.preventDefault(),console.log("clicked add");const t=document.getElementById("projectName").value;console.log("project name",t),n(t),document.getElementById("projectModal").style.display="none",document.getElementById("project-form").reset()})),(()=>{const d=localStorage.getItem("todoAppData");d?(JSON.parse(d).forEach((n=>{const d=t(n.name);n.todos.forEach((t=>{d.todos.push(e(t.title,t.description,t.dueDate,t.priority))})),o.push(d)})),c()):n("Default Project")})();const r=()=>{localStorage.setItem("todoAppData",JSON.stringify(o))}})();